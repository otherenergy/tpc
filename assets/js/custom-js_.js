function compruebaDatosRegistro(){return""==$("#input_email").val()||""==$("#input_pass").val()||""==$("#input_nombre").val()?(muestraMensajeLn(vocabularios.vocabulario_debe_introducir_nombre_email_contrasena),!1):$("#input_pass").val()!=$("#input_repite_pass").val()?(muestraMensajeLn(vocabularios.vocabulario_contrasenas_no_coinciden),!1):!!validaEmail($("#input_email").val())||(muestraMensajeLn(vocabularios.vocabulario_email_no_valido),!1)}function validaEmail(a){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)}function eliminaCupon(){$.ajax({url:"../class/control.php",type:"POST",datatype:"html",data:{accion:"elimina_cupon_descuento"}}).done(function(a){var a=$.parseJSON(a);muestraMensajeLn(a.msg),setTimeout(function(){location.reload()},2e3)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function exit(a){$.ajax({url:a+"class/control.php",type:"post",dataType:"text",data:{accion:"logout"}}).done(function(t){var t=$.parseJSON(t);muestraMensajeLn(t.msg),setTimeout(function(){window.location.href=a+idiomaUrl},2e3)}).fail(function(){alert("error")})}function compruebaDatos(){return""!=$("#input_email").val()&&""!=$("#input_pass").val()||(muestraMensajeLn(vocabularios.debe_introducir_con),!1)}function validaDni(a){return dni=a.substring(0,a.length-1),!!isNaN(le=a.charAt(a.length-1))&&(cadena="TRWAGMYFPDXBNJZSQVHLCKET",posicion=dni%23,(letra=cadena.substring(posicion,posicion+1))==le.toUpperCase())}function addProductCar(a){var t=a.attr("idProd"),o=a.attr("variante"),e=a.attr("color"),r=a.attr("acabado"),s=a.attr("juntas"),i=a.attr("formato"),n=a.attr("cantidad"),c=a.attr("id_idioma");$.ajax({url:"../assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:1,idProd:t,variante:o,color:e,acabado:r,formato:i,juntas:s,cantidad:n,id_idioma:c}}).done(function(a){var a=$.parseJSON(a);$("#numprod").text(a.numProd),fnc_carrito_header(),actualizaCarrito("../")}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function eliminaArticulo(a,t){console.log("Eliminar",t),$.ajax({url:t+"assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:5,uid:a}}).done(function(a){var a=$.parseJSON(a);muestraMensaje(a.texto),$("#numprod").text(a.numProd),actualizaCarrito(t)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function eliminaDireccion(a,t,o){$.ajax({url:o+"class/control.php",type:"POST",datatype:"json",data:{accion:"elimina_direccion",id:a,tipo_direccion:t}}).done(function(a){var a=$.parseJSON(a);muestraMensajeLn(a.msg),setTimeout(function(){location.reload()},2e3)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function eliminaArticuloListado(a){$.ajax({url:"../assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:5,uid:a}}).done(function(a){var a=$.parseJSON(a);muestraMensaje(a.texto),$("#numprod").text(a.numProd),setTimeout(function(){location.reload()},1500)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function vaciarCarrito(){$.ajax({url:"../assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:6}}).done(function(a){var a=$.parseJSON(a);muestraMensajeLn(a.texto),setTimeout(function(){location.reload()},2e3)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function finalizaPedido(){$.ajax({url:"./assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:6}}).done(function(a){window.location.href="./"}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function actualizaCarrito(a){console.log("Actualizar",a),$.ajax({url:a+"includes/actualiza_carrito.php",type:"POST",datatype:"html"}).done(function(a){$("#lista-productos").html(a),$(".nav-item.carrito a").click(function(a){$("#lista-productos").fadeIn("10"),$("#lista-productos").fadeIn("100",function(){$(".navbar-collapse").addClass("show")}),991>$(window).width()&&($("#lista-productos").fadeIn("100",function(){$("#menu-header").addClass("ocultar")}),$(".perfil").addClass("ocultar"),$(".nav-item.carrito").addClass("ocultar"),$(".idiomas").addClass("ocultar"))}),$("#lista-productos .tit .fa-times").click(function(a){$("#lista-productos").fadeOut("100",function(){$(".navbar-collapse").removeClass("show"),$("#menu-header").removeClass("ocultar"),$(".perfil").removeClass("ocultar"),$(".carrito").removeClass("ocultar"),$(".idiomas").removeClass("ocultar")})}),$(".perfil a").click(function(a){$("#menu-usuario").fadeIn("10"),$("#menu-usuario").fadeIn("100",function(){$(".navbar-collapse").addClass("show")}),991>$(window).width()&&($("#menu-usuario").fadeIn("100",function(){$("#menu-header").addClass("ocultar")}),$(".perfil").addClass("ocultar"),$(".nav-item.carrito").addClass("ocultar"),$(".idiomas").addClass("ocultar"))}),$("#menu-usuario .tit .fa-times").click(function(a){$("#menu-usuario").fadeOut("100",function(){$("#menu-header").removeClass("ocultar"),$(".navbar-collapse").removeClass("show"),$(".perfil").removeClass("ocultar"),$(".nav-item.carrito").removeClass("ocultar"),$(".idiomas").removeclass("ocultar")})})}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function muestraMensaje(a){$("#mensaje").html(a).fadeIn("200",function(){setTimeout(function(){$("#mensaje").html(a).fadeOut("200")},500)})}function muestraMensajeAlerta(a){$("header").addClass("overall"),$("#mensajeAlerta").html(a).fadeIn("200",function(){setTimeout(function(){$("header").removeClass("overall"),$("#mensajeAlerta").html(a).fadeOut("200")},2e3)})}function muestraMensajeLn(a){$("header").addClass("overall"),$("#mensaje").html(a).fadeIn("200",function(){setTimeout(function(){$("header").removeClass("overall"),$("#mensaje").html(a).fadeOut("200")},2e3)})}function muestraMensajeMl(a){$("header").addClass("overall"),$("#mensaje").html(a).fadeIn("200",function(){setTimeout(function(){$("header").removeClass("overall"),$("#mensaje").html(a).fadeOut("200")},6e3)})}function validaEmail(a){return!!(emailRegex=/^[-\w.%+]{1,64}@(?:[A-Z0-9-]{1,63}\.){1,125}[A-Z]{2,63}$/i).test(a)||(muestraMensajeLn(msg=vocabularios.direccion_email_incorrecta),!1)}function cambioUrlEnvio(a){$.ajax({url:"../assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:6}}).done(function(t){window.location.href=a}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}function cambioIdioma(){console.log("Se ha cambiado de idioma")}function cambioUrlEnvio(a){$.ajax({url:"../assets/lib/carrito.php",type:"POST",datatype:"json",data:{accion:6}}).done(function(t){window.location.href=a}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}$(document).ready(function(){if($(function(){$('[data-bs-toggle="tooltip"]').tooltip()}),$(".nav-item.carrito a").click(function(a){$("#lista-productos").fadeIn("10"),$("#lista-productos").fadeIn("100",function(){$(".navbar-collapse").addClass("show")}),991>$(window).width()&&($("#lista-productos").fadeIn("100",function(){$("#menu-header").addClass("ocultar")}),$(".perfil").addClass("ocultar"),$(".nav-item.carrito").addClass("ocultar"),$(".idiomas").addClass("ocultar"))}),$("#lista-productos .tit .fa-times").click(function(a){$("#lista-productos").fadeOut("100",function(){$(".navbar-collapse").removeClass("show"),$("#menu-header").removeClass("ocultar"),$(".perfil").removeClass("ocultar"),$(".carrito").removeClass("ocultar"),$(".idiomas").removeClass("ocultar")})}),$(".perfil a").click(function(a){$("#menu-usuario").fadeIn("10"),$("#menu-usuario").fadeIn("100",function(){$(".navbar-collapse").addClass("show")}),991>$(window).width()&&($("#menu-usuario").fadeIn("100",function(){$("#menu-header").addClass("ocultar")}),$(".perfil").addClass("ocultar"),$(".nav-item.carrito").addClass("ocultar"),$(".idiomas").addClass("ocultar"))}),$("#menu-usuario .tit .fa-times").click(function(a){$("#menu-usuario").fadeOut("100",function(){$("#menu-header").removeClass("ocultar"),$(".navbar-collapse").removeClass("show"),$(".perfil").removeClass("ocultar"),$(".nav-item.carrito").removeClass("ocultar"),$(".idiomas").removeClass("ocultar")})}),document.querySelectorAll("#productos_img_var").length>0){var a=document.getElementById("contenedor_video_producto"),t=document.getElementById("img-principal-prod");a.setAttribute("class","ocultar"),t.setAttribute("class","img_product");var o=0;$(".sel-color").not(".agotado").click(function(a){document.getElementById("miVideo").pause(),$("#contenedor_video_producto").attr("class","ocultar"),$("#img-principal-prod").attr("class","img_product");var t=$(this).find("img");$("img.img_product").attr("src",t.attr("src")),$("img.img_product").attr("color",t.attr("color"));var o=t.attr("color");o&&""!=o.trim()&&$("p.p_color_ncs").html("NCS: <br>"+o),$(".video_product_activado").attr("class","video_products"),$(".close-img")[0]||$("div.img_product").append('<i class="close-img fa fa-times"></i>')}),$(".imgs_products").click(function(a){$(".img_product .rebaja").css("z-index","1000"),$("p.p_color_ncs").html(""),o=0,$(".close-img").remove(),document.getElementById("miVideo").pause(),$("#contenedor_video_producto").attr("class","ocultar"),$("#img-principal-prod").attr("class","img_product"),$("img.img_product").attr("src",$(this).attr("src")),$(".imgs_products").attr("class","imgs_products"),$("p.p_color_ncs").html(""),$(".video_product_activado").attr("class","video_products"),$(this).attr("class","imgs_products img_product_activado"),0==o&&$("img.img_product").attr("img-prod",$("img.img_product_activado").attr("src"))}),$(".video_products").click(function(o){$(".img_product .rebaja").css("z-index","-1"),$(".imgs_products").attr("class","imgs_products"),$(".video_products").attr("class","video_products"),a.classList.remove("ocultar"),t.setAttribute("class","ocultar"),a.classList.add("mostrar"),this.setAttribute("class","video_products video_product_activado"),video_product_activado=this.getAttribute("video"),$("p.p_color_ncs").html("");var e='<video style=" z-index: 52 !important; " width="100%" id="miVideo" controls autoplay><source src="'+video_product_activado+'" type="video/mp4"></video>';$("#div-video-home").html(e);var r=document.getElementById("miVideo");r.style.display="block",r.play(),r.addEventListener("ended",function o(){r.style.display="none",a.setAttribute("class","ocultar"),t.setAttribute("class","img_product")})}),$(document).on("click",".close-img",function(a){$(".close-img").remove(),$("img.img_product").attr("src",$("img.img_product").attr("img-prod")),$(".class_imgs_products").attr("class","class_imgs_products"),$("p.p_color_ncs").html("")})}else{var o=0;$(".sel-color img").not(".sel-color.agotado img").click(function(a){0==o&&$("img.img_product").attr("img-prod",$("img.img_product").attr("src")),o=1,$("img.img_product").attr("src",$(this).attr("src")),$(".close-img")[0]||$("div.img_product").append('<i class="close-img fa fa-times"></i>')}),$(document).on("click",".close-img",function(a){$(".close-img").remove(),$("img.img_product").attr("src",$("img.img_product").attr("img-prod"))})}function e(a){a>20?$("nav.navbar").length>0&&$("nav.navbar").addClass("fixed"):$("nav.navbar").removeClass("fixed")}$(".img_galeria, .colores-hormigon-impreso img").click(function(a){$(window).width()>=768&&(a.preventDefault(),$(".fondo img").attr("src",$(this).attr("src")),$(".fondo .txt-fondo").text($(this).attr("title")),$(".fondo").fadeIn())}),$(".img_color").click(function(a){$(window).width()>=768&&(a.preventDefault(),$("html").css("overflow","hidden"),$(".fondo img").attr("src",$(this).attr("src-zoom")),$(".fondo .txt-fondo").text($(this).attr("title")),$(".fondo").fadeIn())}),$(".fondo, .fondo .close").click(function(a){a.preventDefault(),$(".fondo").fadeOut(),$("html").css("overflow","auto")}),$(".sel-color").not(".agotado").click(function(a){$(".sel-color").removeClass("selected"),$(this).addClass("selected"),$("#submit").attr("color",$(this).attr("color"))}),$(".sel-acabado").click(function(a){$(".sel-acabado").removeClass("selected"),$(this).addClass("selected"),$("#submit").attr("acabado",$(this).attr("acabado"))}),$(".sel-juntas").click(function(a){$(".sel-juntas").removeClass("selected"),$(this).addClass("selected"),$("#submit").attr("juntas",$(this).attr("juntas"))}),$(".sel-formato").click(function(a){$(".sel-formato").removeClass("selected"),$(this).addClass("selected"),$("#submit").attr("formato",$(this).attr("formato"))}),$(document).on("click",".click_valora",function(a){sku=$(this).attr("sku"),url="lista_valoraciones";var t=new bootstrap.Modal(document.getElementById("datos"),{keyboard:!1});$.ajax({url:"./includes/"+url+".php",type:"GET",datatype:"html",data:{sku:sku}}).done(function(a){$("#datos .modal-body").html(a),t.show()}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}),$(document).on("click",".ico_preguntas",function(a){sku=$(this).attr("sku"),url="lista_preguntas";var t=new bootstrap.Modal(document.getElementById("datos"),{keyboard:!1});$.ajax({url:"./includes/"+url+".php",type:"GET",datatype:"html",data:{sku:sku}}).done(function(a){$("#datos .modal-body").html(a),t.show()}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})}),$(document).on("click",".contadores .btn-mas",function(a){var t=$(this).closest(".contadores").find("input"),o=Number(t.val())>=999?999:Number(t.val())+1;t.val(o).change(),$("#submit").attr("cantidad",o)}),$(document).on("click",".contadores .btn-menos",function(a){var t=$(this).closest(".contadores").find("input"),o=1==Number(t.val())?1:Number(t.val())-1;t.val(o).change(),$("#submit").attr("cantidad",o)}),$("#boton-arriba").click(function(a){$("html, body").animate({scrollTop:0},500)}),$(window).width()>974&&(e($(this).scrollTop()),$(window).scroll(function(){e($(this).scrollTop())})),$(".perfil .nav-link").click(function(a){$(".menu-user").fadeIn()}),$(".producto-cantidad #cant").change(function(a){var t=$(this).closest(".producto-item").attr("uid"),o=$(this).val();$.ajax({url:"../assets/lib/carrito.php",type:"post",datatype:"text",data:{accion:"8",uid:t,cantidad:o}}).done(function(a){window.location.reload()}).fail(function(){alert("error")})}),$("#aplica_descuento").click(function(a){$.ajax({url:"../class/control.php",type:"POST",datatype:"html",data:{accion:"aplica_codigo_descuento",nombre_descuento:$("#nombre_descuento").val()}}).done(function(a){var a=$.parseJSON(a);muestraMensajeLn(a.msg),setTimeout(function(){location.reload()},2e3)}).fail(function(){alert(vocabularios.vocabulario_se_ha_producido_un_error)})})}),$("#form-login, #form-, form.desc").submit(function(a){a.preventDefault()}),$(".login-form").length>0&&$(".login-button").click(function(a){compruebaDatos()&&$.ajax({url:"../class/control.php",type:"post",dataType:"html",data:$("#form-login").serialize()}).done(function(a){var a=$.parseJSON(a);0==a.res?muestraMensajeAlerta(a.msg):1==a.res&&(muestraMensajeLn(a.msg),setTimeout(function(){location.reload()},2e3))}).fail(function(){alert("error")})}),$("#form-registro").submit(function(a){a.preventDefault()}),$(".registro-form").length>0&&$(".registro-button").click(function(a){a.preventDefault(),compruebaDatosRegistro()&&$.ajax({url:"../class/control.php",type:"post",dataType:"text",data:$("#form-registro").serialize()}).done(function(a){try{var t=$.parseJSON(a);muestraMensajeLn(t.msg),0==t.res?muestraMensajeLn(t.msg):1==t.res&&(muestraMensajeLn(t.msg),setTimeout(function(){location.reload()},2e3))}catch(o){console.error("Error parsing JSON response: ",o),muestraMensajeLn("Error en la respuesta del servidor.")}}).fail(function(a,t,o){console.error("Error in AJAX request: ",t,o),alert("error")})}),$("ul.dropdown-menu.dropdown-menu-light li").click(function(){cambioIdioma()});const anuncio=document.querySelector(".anuncio");if(anuncio){let a=document.querySelector("ul#icons");769>$(window).width()?a&&(a.style.top="90px"):a&&(a.style.top="56px")}var menu_header=document.querySelector(".menu-header"),lista_productos=document.querySelector("#lista-productos"),close_hamburguesa=document.querySelector("#close-hamburguesa"),menu_hamburguesa=document.querySelector(".menu-hamburguesa");function fnc_menu_hamburguesa(){menu_header.classList.toggle("mostrar-header"),close_hamburguesa.classList.toggle("ocultar"),close_hamburguesa.classList.toggle("close-hamburguesa"),menu_hamburguesa.classList.toggle("ocultar")}function fnc_carrito_header(){menu_header.classList.remove("mostrar-header"),lista_productos.style.display="block"}function fnc_ocultar_carrito_header(){menu_header.classList.add("mostrar-header"),lista_productos.style.display="none"}document.addEventListener("click",function(a){menu_header.contains(a.target)||menu_hamburguesa.contains(a.target)||close_hamburguesa.contains(a.target)||(menu_header.classList.remove("mostrar-header"),close_hamburguesa.classList.add("ocultar"),close_hamburguesa.classList.remove("close-hamburguesa"),menu_hamburguesa.classList.remove("ocultar"))}),window.addEventListener("scroll",function(){var a=document.querySelector(".nav-header-principal"),t=document.querySelector(".img-logo-smartcret"),o=document.querySelector(".contenedor-logo-smartcret"),e=document.querySelector(".contenedor-moverse-logo-smartcret"),r=a.offsetTop,s=window.scrollY;s>=r-20&&s>0?(a.classList.add("estilos-scroll-header"),t.classList.add("estilos-scroll-img-logo"),menu_header.classList.add("estilos-scroll-menu-header"),o.classList.add("estilos-scroll-contenedor-logo-smartcret"),e.classList.add("contenedor-scroll-moverse-logo-smartcret")):(a.classList.remove("estilos-scroll-header"),t.classList.remove("estilos-scroll-img-logo"),menu_header.classList.remove("estilos-scroll-menu-header"),o.classList.remove("estilos-scroll-contenedor-logo-smartcret"),e.classList.remove("contenedor-scroll-moverse-logo-smartcret"))});